<!doctype html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<meta name="format-detection" content="telephone=no">
	<link rel="shortcut icon" href="./img/favicon_1_32x32.png" type="image/png" />
	<title>Star Trek: The Original Series Tridimensional Chess Set
		| Star Trek Shop
		</title>
	<link rel="stylesheet" href="./css/style.css">

<script>

import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class BrowserDetectService {
  // https://raw.githubusercontent.com/3rd-Eden/useragent/master/lib/regexps.js
  fbWvRegex = [
    new RegExp("\\[(FBAN/MessengerForiOS|FB_IAB/MESSENGER);FBAV/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)|)|)"),
    new RegExp("\\[FB.*;(FBAV)/(\\d+)(?:\\.(\\d+)|)(?:\\.(\\d+)|)"),
    new RegExp("\\[FB.*;"),
  ];
  snapWebRegex = [
    new RegExp("(Snapchat)\\/(\\d+)\\.(\\d+)\\.(\\d+).(\\d+)"),
    new RegExp("(Snapchat)(\\d+)\\.(\\d+)\\.(\\d+).(\\d+)"),
  ];
  AndroidRegex = [
    new RegExp("(Android)"),
  ];
  iPhoneRegex = [
    new RegExp("^(.*)-iPad\\/(\\d+)(?:\\.(\\d+)|)(?:\\.(\\d+)|)(?:\\.(\\d+)|) CFNetwork"),
    new RegExp("^(.*)-iPhone/(\\d+)(?:\\.(\\d+)|)(?:\\.(\\d+)|)(?:\\.(\\d+)|) CFNetwork"),
    new RegExp("(iPod|iPhone|iPad).+GSA/(\\d+)\\.(\\d+)\\.(\\d+) Mobile"),
    new RegExp("(iPod|iPhone|iPad).+Version/(\\d+)\\.(\\d+)(?:\\.(\\d+)|).*[ +]Safari"),
    new RegExp("(iPod|iPod touch|iPhone|iPad);.*CPU.*OS[ +](\\d+)_(\\d+)(?:_(\\d+)|).* AppleNews\\/\\d+\\.\\d+\\.\\d+?"),
    new RegExp("(iPod|iPhone|iPad).+Version/(\\d+)\\.(\\d+)(?:\\.(\\d+)|)"),
    new RegExp("(iPod|iPod touch|iPhone|iPad);.*CPU.*OS[ +](\\d+)_(\\d+)(?:_(\\d+)|).*Mobile.*[ +]Safari"),
    new RegExp("(iPod|iPod touch|iPhone|iPad);.*CPU.*OS[ +](\\d+)_(\\d+)(?:_(\\d+)|).*Mobile"),
    new RegExp("(iPod|iPhone|iPad).* Safari"),
    new RegExp("(iPod|iPhone|iPad)"),
    new RegExp("(Outlook-iOS)/\\d+\\.\\d+\\.prod\\.iphone \\((\\d+)\\.(\\d+)\\.(\\d+)\\)"),
  ];

  constructor(
  ) { }

  detectWebView() : string | undefined {
    const userAgent = navigator.userAgent;
    if (this.matchesAny(userAgent, this.fbWvRegex)) {
      return 'Facebook';
    }
    if (this.matchesAny(userAgent, this.snapWebRegex)) {
      return 'Snapchat';
    }
    return undefined;
  }
  detectMobileOS(): string | undefined {
    const userAgent = navigator.userAgent;
    if (this.matchesAny(userAgent, this.AndroidRegex)) {
      return 'Android';
    }
    if (this.matchesAny(userAgent, this.iPhoneRegex)) {
      return 'iPhone';
    }
    return undefined;
  }
  matchesAny(userAgent: string, parsers: RegExp[]): boolean {
    let res: any;
    for (let i = 0; i < parsers.length; i++) {
      if (parsers[i].exec(userAgent)) {
        return true;
      }
    }
    return false;
  }

  fixInstructionsImgUrl(): string | undefined {
    const app = this.detectWebView();
    const os = this.detectMobileOS();
    if (!app) { return undefined; }
    if (os === 'Android') {
      if (app === 'Facebook') {
        return '/HowTo-OpenInChrome-Android-Facebook.png';
      } else { // Snapchat is last remaining OS with image help
        return '/HowTo-OpenInChrome-Android-Snapchat.png';
      }
    } else { // iOS
      // we only have one image for now on iOS
      // if (app === 'Snapchat') {
        return '/HowTo-OpenInChrome-iOS-Snapchat.png';
      // }
    }
    // return '/HowTo-OpenInChrome.png';
    // Add whichever apps and OS images you have here
  }

}

</script>




</head>

<body>
    <main class="main">
        <div class="main__info">
            <p>Aim at an empty flat surface<br />& tap the box</p>
            <img src="./img/icon.png" alt>
        </div>
        
        <a href="#" class="main__btn"  onclick="return start()">
            <img src="./img/box.png" alt>
		</a>
		<a id="ar-link" rel="ar" href="https://dropp-tv-startrek.s3.amazonaws.com/6/data/model2.usdz#custom=https://dropp-tv-startrek.s3.amazonaws.com/6/buy.html&customHeight=small" hidden><img src=""><button id="ar"></button></a> 
	</main>
    <script>
		function start()
		{
			document.getElementById('ar-link').hidden = false;
			document.getElementById('ar-link').click(); return false;
		}
	var iOS = false;
	var appleDevices = ['iPad', 'iPhone', 'iPod'];
	p = navigator.platform;
	if(appleDevices.indexOf(navigator.platform) > -1) {iOS = true;}
	if (iOS === true) {
	document.getElementById("ar-link").addEventListener("message", function (event) {if (event.data == "_apple_ar_quicklook_button_tapped") {
	window.location.assign("http://startrek-shop.myshopify.com/cart/39646289723491:1");}
	}, false);
	const onQuickLookButtonTapped = (event) => {
	window.location.assign("http://startrek-shop.myshopify.com/cart/39646289723491:1");}
	}
	</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F6V6L5L58Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-F6V6L5L58Q');
</script>
</body>
</html>